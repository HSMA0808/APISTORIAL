CREATE DATABASE APISTORIAL_v1
GO

USE APISTORIAL_v1
GO

CREATE TABLE NAMEVALUE
(IDNAMEVALUE INT PRIMARY KEY IDENTITY
,IDGROUP INT
,DESCRIPTION NVARCHAR(75)
,CUSTOMSTRING1 NVARCHAR(75)
,CUSTOMSTRING2 NVARCHAR(75)
,CUSTOMINT1 INT
,CUSTOMINT2 INT
,GROUP_NAME NVARCHAR(150)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE SPECIALTYS
(IDSPECIALTY INT PRIMARY KEY IDENTITY
,DESCRIPTION NVARCHAR(200)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE ANALYSIS_TYPE
(IDANALYSIS_TYPE INT PRIMARY KEY IDENTITY
,DESCRIPTION NVARCHAR(200)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE RESULT_TYPE
(IDRESULT_TYPE INT PRIMARY KEY IDENTITY
,DESCRIPTION NVARCHAR(200)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE ANALYSIS
(IDANALYSIS INT PRIMARY KEY IDENTITY
,IDANALYSIS_TYPE INT CONSTRAINT FK_IDANALYSISTYPE_ANALYSIS_ANALYSISTYPE REFERENCES ANALYSIS_TYPE (IDANALYSIS_TYPE)
,IDRESULT_TYPE INT CONSTRAINT FK_IDRESULTTYPE_ANALYSIS_RESULTTYPE REFERENCES RESULT_TYPE (IDRESULT_TYPE)
,DESCRIPTION NVARCHAR(300)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE OPERATION_TYPE
(IDOPERATION_TYPE INT PRIMARY KEY IDENTITY
,DESCRIPTION NVARCHAR(200)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE OPERATION
(IDOPERATION INT PRIMARY KEY IDENTITY
,IDOPERATION_TYPE INT CONSTRAINT FK_IDOPERATIONTYPE_OPERATION_OPERATIONTYPE REFERENCES OPERATION_TYPE (IDOPERATION_TYPE)
,DESCRIPTION NVARCHAR(300)
,CODE NVARCHAR(10)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE MEDICAL_CENTER
(
IDMEDICAL_CENTER INT PRIMARY KEY IDENTITY
,DESCRIPCION NVARCHAR(300)
,RNC NVARCHAR(25)
,TEL1 NVARCHAR(15)
,TEL2 NVARCHAR(15)
,EMAIL1 NVARCHAR(200)
,EMAIL2 NVARCHAR(200)
,NAME_CONTACT NVARCHAR(500)
,NVSTATUS_CENTER INT CONSTRAINT FK_NVSTATUSCENTER_MEDICALCENTER_NAMEVALUE FOREIGN KEY (NVSTATUS_CENTER) REFERENCES NAMEVALUE (IDNAMEVALUE)
,TOKEN NVARCHAR(150)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE PATIENT
(IDPATIENT INT PRIMARY KEY IDENTITY
,FIRST_NAME NVARCHAR(75)
,MIDDLE_NAME NVARCHAR(75)
,LAST_NAME NVARCHAR(75)
,SEX NVARCHAR(1)
,NVIDENTIFICATION_TYPE INT CONSTRAINT FK_IDNAMEVALUE_PATIENT_NAMEVALUE FOREIGN KEY(NVIDENTIFICATION_TYPE) REFERENCES NAMEVALUE (IDNAMEVALUE)
,IDENTIFICATION_NUMBER VARCHAR(20)
,ADDRESS1 NVARCHAR(500)
,ADDRESS2 NVARCHAR(500)
,NVBLOOD_TYPE INT CONSTRAINT FK_NVBLOOD_PATIENT_NAMEVALUE FOREIGN KEY(NVBLOOD_TYPE) REFERENCES NAMEVALUE (IDNAMEVALUE)
,TEL1 NVARCHAR(15)
,TEL2 NVARCHAR(15)
,EMAIL NVARCHAR(200)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE DOCTOR
(IDDOCTOR INT PRIMARY KEY IDENTITY
,FIRST_NAME NVARCHAR(75)
,MIDDLE_NAME NVARCHAR(75)
,LAST_NAME NVARCHAR(75)
,SEX NVARCHAR(1)
,NVIDENTIFICATION_TYPE INT CONSTRAINT FK_IDNAMEVALUE_DOCTOR_NAMEVALUE FOREIGN KEY(NVIDENTIFICATION_TYPE) REFERENCES NAMEVALUE (IDNAMEVALUE)
,IDENTIFICATION_NUMBER VARCHAR(20)
,ADDRESS1 NVARCHAR(500)
,ADDRESS2 NVARCHAR(500)
,IDSPECIALTY INT CONSTRAINT FK_IDSPECIALTY_DOCTOR_SPECIALTYS FOREIGN KEY(IDSPECIALTY) REFERENCES SPECIALTYS (IDSPECIALTY)
,NVBLOOD_TYPE INT CONSTRAINT FK_NVBLOOD_DOCTOR_NAMEVALUE FOREIGN KEY(NVBLOOD_TYPE) REFERENCES NAMEVALUE (IDNAMEVALUE)
,TEL1 NVARCHAR(15)
,TEL2 NVARCHAR(15)
,EMAIL NVARCHAR(200)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME)
GO

CREATE TABLE RECORD
(IDRECORD INT PRIMARY KEY IDENTITY
,IDPATIENT INT CONSTRAINT FK_IDPATIENT_RECORD_PATIENT FOREIGN KEY (IDPATIENT) REFERENCES PATIENT (IDPATIENT)
,MEDICALCENTER_CREATOR INT CONSTRAINT FK_LAST_MEDICALCENTERCREATOR_RECORD_MEDICALCENTER REFERENCES MEDICAL_CENTER (IDMEDICAL_CENTER)
,LAST_MEDICALCENTER_UPDATE INT CONSTRAINT FK_LAST_MEDICALCENTERUPDATE_RECORD_MEDICALCENTER REFERENCES MEDICAL_CENTER (IDMEDICAL_CENTER))
GO

CREATE TABLE RECORD_VISITS
(
IDRECORD_VISITS INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDVISITS_RECORD REFERENCES RECORD (IDRECORD)
,IDDOCTOR INT CONSTRAINT FK_IDOCTOR_RECORDVISITS_DOCTOR REFERENCES DOCTOR (IDDOCTOR)
,IDSPECIALTY INT CONSTRAINT FK_IDSPECIALTY_RECORDVISITS_SPECIALTYS REFERENCES SPECIALTYS (IDSPECIALTY)
,OBSERVATIONS NVARCHAR(500)
,INDICATIONS NVARCHAR(500)
,VISIT_DATE DATETIME
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_ANALYSIS
(
IDRECORD_ANALYSIS INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDANALYSIS_RECORD REFERENCES RECORD (IDRECORD)
,IDANALYSIS INT CONSTRAINT FK_IDANALYSIS_RECORDANALYSIS_ANALYSIS REFERENCES ANALYSIS (IDANALYSIS)
,PUBLIC_RESULTS BIT
,RESULTS NVARCHAR(500)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_OPERATIONS
(
IDRECORD_OPERATIONS INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDOPERATIONS_RECORD REFERENCES RECORD (IDRECORD)
,IDOPERATION INT CONSTRAINT FK_IDOPERATION_RECORDOPERATION_OPERATION REFERENCES OPERATION (IDOPERATION)
,IDDOCTOR INT CONSTRAINT FK_IDDOCTOR_RECORDOPERATION_DOCTOR REFERENCES DOCTOR (IDDOCTOR)
,OPERATIONDATE DATETIME
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_ALLERGIES
(
IDRECORD_ALLERGIES INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDALLERGIES_RECORD REFERENCES RECORD (IDRECORD)
,NVALLERGIE INT CONSTRAINT FK_NVALLERGIE_RECORDALLERGIES_NAMEVALUE REFERENCES NAMEVALUE (IDNAMEVALUE)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_VACCINES
(
IDRECORD_VACCINES INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDVACCINES_RECORD REFERENCES RECORD (IDRECORD)
,NVVACCINE INT CONSTRAINT FK_NVVACCINE_RECORDVACCINE_NAMEVALUE REFERENCES NAMEVALUE (IDNAMEVALUE)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_INTERMENTS
(
IDRECORD_OPERATIONS INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDINTERMENTS_RECORD REFERENCES RECORD (IDRECORD)
,IDMEDICAL_CENTER INT CONSTRAINT FK_IDMEDICALCENTER_RECORDINTERMENTS_MEDICALCENTER REFERENCES MEDICAL_CENTER (IDMEDICAL_CENTER)
,INTERMENTDATE DATETIME
,REASON NVARCHAR(500)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO

CREATE TABLE RECORD_EMERGENCYEMTRY
(
IDRECORD_EMERGENCYENTRY INT PRIMARY KEY IDENTITY
,IDRECORD INT CONSTRAINT FK_LAST_IDRECORD_RECORDEMERGENCYENTRY_RECORD REFERENCES RECORD (IDRECORD)
,IDMEDICAL_CENTER INT CONSTRAINT FK_IDMEDICALCENTER_RECORDEMERGENCYENTRY_MEDICALCENTER REFERENCES MEDICAL_CENTER (IDMEDICAL_CENTER)
,INTERMENTDATE DATETIME
,REASON NVARCHAR(500)
,CREATE_USER NVARCHAR(50)
,CREATE_DATE DATETIME
,UPDATE_USER NVARCHAR(50)
,UPDATE_DATE DATETIME
)
GO
